# .platform.app.yaml

# The name of this application, which must be unique within a project.
name: 'app'

# The type key specifies the language and version for your application.
type: 'nodejs:12'

dependencies:
    nodejs:
      pm2: "^2.5.0"

hooks:
    build:
        yarn build

# The configuration of the application when it is exposed to the web.
web:
    commands:
        start: "PM2_HOME=/src pm2 start start.js --no-daemon"
    locations:
        '/':
            # The public directory of the application relative to its root.
            root: 'public'
            passthru: true
            index: ['index.html']
            scripts: false
            allow: true
            expires: 1m
            rules:
                \.(css|js|gif|jpe?g|png|ttf|eot|woff2?|otf|cast|mp4|json|yaml|ico|svg?|cast|mp4|json|yaml|svg?|ttf)$:
                    expires: 4w

disk: 1024